library("cmdstanr")
set_cmdstan_path("/data/cmdstan")
source("run.R")
sir.res <- benchmark.rk45("sir/sir.stan", "sir/sir.data.R", "sir/sir.data.erk45.R", 982)
sir.res
sir.res.2 <- benchmark.rk45("sir/sir.stan", "sir/sir.data.R", "sir/sir.data.erk45.R", 98232)
sir.res.2
sir.res.3 <- benchmark.rk45("sir/sir.stan", "sir/sir.data.R", "sir/sir.data.erk45.R", 327552)
sir.res.3
sir.res.3 <- benchmark.rk45("sir/sir.stan", "sir/sir.data.R", "sir/sir.data.erk45.R", 32755232)
sir.res.3
sir.res.4 <- benchmark.rk45("sir/sir.stan", "sir/sir.data.R", "sir/sir.data.erk45.R", 155232)
source("run.R")
res1 <- benchmark.rk45("sir/sir.stan", "sir/sir.data.R", "sir/sir.data.erk45.R", 1234)
res1 <- benchmark.rk45("sir/sir.stan", "sir/sir.data.R", "sir/sir.data.erk45.R", 1234)
res1
res2 <- benchmark.rk45("sir/sir.stan", "sir/sir.data.R", "sir/sir.data.erk45.R", 1235)
res2
res1
res3 <- benchmark.rk45("sir/sir.stan", "sir/sir.data.R", "sir/sir.data.erk45.R", 1236)
res3 <- benchmark.rk45("sir/sir.stan", "sir/sir.data.R", "sir/sir.data.erk45.R", 9876)
res3
res2
res
res1
rbind(res1, res2, res3)
q()
library("cmdstanr")
set_cmdstan_path("/data/cmdstan")
source("run.R")
benchmark.rk45("lotka-volterra/lotka-volterra.stan", "lotka-volterra/lotka-volterra.data.R", "lotka-volterra/lotka-volterra.data.erk45.R", 98327)
benchmark.rk45("lotka-volterra/lotka-volterra.stan", "lotka-volterra/lotka-volterra.data.R", "lotka-volterra/lotka-volterra.data.erk45.R", 987)
dopri5.2 <- .Last.value
dopri5.2
q()
library("cmdstanr")
set_cmdstan_path("/data/cmdstan")
source("run.R")
verner.lotka <- benchmark.rk45("lotka-volterra/lotka-volterra.stan", "lotka-volterra/lotka-volterra.data.R", "lotka-volterra/lotka-volterra.data.erk45.R",23498)
verner.lotka
verner.lotka.2 <- benchmark.rk45("lotka-volterra/lotka-volterra.stan", "lotka-volterra/lotka-volterra.data.R", "lotka-volterra/lotka-volterra.data.erk45.R",23498)
verner.lotka.2
verner.lotka.3 <- benchmark.rk45("lotka-volterra/lotka-volterra.stan", "lotka-volterra/lotka-volterra.data.R", "lotka-volterra/lotka-volterra.data.erk45.R",4567)
verner.lotka.3
verner.lotka.4 <- benchmark.rk45("lotka-volterra/lotka-volterra.stan", "lotka-volterra/lotka-volterra.data.R", "lotka-volterra/lotka-volterra.data.erk45.R",4568)
verner.lotka.4
q()
library("cmdstanr")
set_cmdstan_path("~/Work/temp/cmdstan")
vdp.1 <- benchmark.rk45("van_der_pol/vdp.stan", "van_der_pol/vdp.data.R", "van_der_pol/vdp.data.ckrk.R", 12345)
vdp.1 <- benchmark.rk45("van_der_pol/vdp.stan", "van_der_pol/vdp.data.R", "van_der_pol/vdp.data.ckrk.R", 12345)
vdp.1
vdp.2 <- benchmark.rk45("van_der_pol/vdp.stan", "van_der_pol/vdp.data.R", "van_der_pol/vdp.data.ckrk.R", 12346)
vdp.2
vdp.3 <- benchmark.rk45("van_der_pol/vdp.stan", "van_der_pol/vdp.data.R", "van_der_pol/vdp.data.ckrk.R", 12347)
vdp.3
vdp.4 <- benchmark.rk45("van_der_pol/vdp.stan", "van_der_pol/vdp.data.R", "van_der_pol/vdp.data.ckrk.R", 12345)
vdp.4
q()
library("cmdstanr")
set_cmdstan_path("/data/cmdstan/")
source("run.R")
random(10)
sample(2342:344569, 10, replace=T)
sum.sir <- lapply(sample(2342:344569, 10, replace=T), function(i) {benchmark.rk45("sir/sir.stan", "sir/sir.data.R", "sir/sir.data.ckrk.R", i)} )
sum.sir <- lapply(sample(2342:344569, 10, replace=T), function(i) {benchmark.rk45("sir/sir.stan", "sir/sir.data.R", "sir/sir.data.ckrk.R", i)} )
sum.sir
sum.lv <- lapply(sample(2342:344569, 10, replace=F), function(i) {benchmark.rk45("lotka-volterra/lotka-volterra.stan", "lotka-volterra/lotka-volterra.data.R", "lotka-volterra/lotka-volterra.data.ckrk.R", i)})
sum.vdp <- lapply(sample(2342:344569, 10, replace=F), function(i) {benchmark.rk45("van_der_pol/vdp.stan", "van_der_pol/vdp.data.R", "van_der_pol/vdp.data.ckrk.R", i)})
sum.vdp <- lapply(sample(2342:344569, 10, replace=F), function(i) {benchmark.rk45("van_der_pol/vdp.stan", "van_der_pol/vdp.data.R", "van_der_pol/vdp.data.ckrk.R", i)})
getwd()
sum.vdp <- lapply(sample(2342:344569, 10, replace=F), function(i) {benchmark.rk45("van_der_pol/vdp.stan", "van_der_pol/vdp.data.R", "van_der_pol/vdp.data.ckrk.R", i)})
sum.vdp
q()
ls()
sum.sir
sum.lv
sum.vdp
sum.lv
lv.sir
sum.sir
q()
ls()
sum.lv
sum.sir.tabl <- do.call("rbind", sum.sir)
sum.sir.tabl
sum.lv.tabl <- do.call("rbind", sum.lv)
sum.vdp.tabl <- do.call("rbind", sum.vdp)
sum.vdp.tabl
rownames(sum.sir.tabl)
rep(c("rk45","ckrk"),10)
sum.sir.tabl$lib <- rep(c("rk45","ckrk"),10)
sum.sir.tabl
sum.lv.tabl$lib <- rep(c("rk45","ckrk"),10)
sum.vdp.tabl$lib <- rep(c("rk45","ckrk"),10)
sum.vdp.tabl <- rep(c("rk45","ckrk"),10)
sum.vdp.tabl <- do.call("rbind", sum.vdp)
sum.vdp.tabl$lib <- rep(c("rk45","ckrk"),10)
sum.vdp.tabl
library("ggplot2")
ggplot(sum.sir.tabl, aes(x=lib, y=time)) + geom_boxplot()
ggplot(sum.sir.tabl) + facet_grid(lib ~ ., scales="free")
ggplot(sum.sir.tabl) + geom_boxplot() + facet_grid(lib ~ ., scales="free")
ggplot(sum.sir.tabl, aes(x=lib, y=time.per.ess.bulk))
ggplot(sum.sir.tabl, aes(x=lib, y=time.per.ess.bulk)) + geom_boxplot()
ggplot(sum.lv.tabl, aes(x=lib, y=time.per.ess.bulk)) + geom_boxplot()
ggplot(sum.vdp.tabl, aes(x=lib, y=time.per.ess.bulk)) + geom_boxplot()
ggplot(sum.vdp.tabl, aes(x=lib, y=time.per.leap)) + geom_boxplot()
ggplot(sum.vdp.tabl, aes(x=lib, y=time_per_leap)) + geom_boxplot()
ggplot(sum.vdp.tabl, aes(x=lib, y=time)) + geom_boxplot()
ggplot(sum.lv.tabl, aes(x=lib, y=time)) + geom_boxplot()
ggplot(sum.sir.tabl, aes(x=lib, y=time)) + geom_boxplot()
ggplot(sum.sir.tabl, aes(x=lib, y=num_leap)) + geom_boxplot()
ggplot(sum.sir.tabl, aes(x=lib, y=num_leaps)) + geom_boxplot()
ggplot(sum.sir.tabl, aes(x=lib, y=time.per.ess.bulk)) + geom_boxplot()
ggplot(sum.vdp.tabl, aes(x=lib, y=time.per.ess.bulk)) + geom_boxplot()
ggplot(sum.vdp.tabl, aes(x=lib, y=time_per_leap)) + geom_boxplot()
ggplot(sum.vdp.tabl, aes(x=lib, y=time)) + geom_boxplot()
library(tidyr)
data_long <- gather(sum.vdp.tabl, condition, measurement, num_leaps:lib, factor_key=TRUE)
data_long
ggplot(data_long, aes(x=lib)) + geom_boxplot() + facet_grid()
ggplot(data_long) + geom_boxplot() + facet_grid(lib~.)
data_long <- gather(sum.vdp.tabl, condition, measurement, num_leaps:time.per.ess.tail, factor_key=TRUE)
ggplot(data_long) + geom_boxplot() + facet_grid(lib~.)
ggplot(data_long, aes=(x=lib)) + geom_boxplot() + facet_grid(lib~.)
ls()
sum.lv.tabl
colnames(sum.lv.tabl)
colnames(sum.lv.tabl)[-1]
colnames(sum.lv.tabl)[length(colnames(sum.lv.tabl))]
colnames(sum.lv.tabl)[length(colnames(sum.lv.tabl))] <- "integrator"
sum.lv.tabl
gather(sum.vdp.tabl, condition, measurement, seed:integrator, factor_key=TRUE)
gather(sum.lv.tabl, condition, measurement, seed:integrator, factor_key=TRUE)
data <- gather(sum.lv.tabl, condition, measurement, seed:integrator, factor_key=TRUE)
data <- gather(sum.lv.tabl, condition, measurement, num_leaps:time.per.ess.tail, factor_key=TRUE)
data
data <- gather(sum.lv.tabl, item, value, num_leaps:time.per.ess.tail, factor_key=TRUE)
data
ggplot(data, aes=(x=integrator, y=value)) + geom_boxplot() + facet_grid(item~.)
ggplot(data, aes(x=integrator, y=value)) + geom_boxplot() + facet_grid(item~.)
ggplot(data, aes(x=integrator, y=value)) + geom_boxplot() +
  facet_grid(item~., scale="free")
ggplot(data, aes(x=integrator, y=value)) + geom_boxplot() + facet_grid(item~.,scale="free")
ggplot(data, aes(x=integrator, y=value)) + geom_boxplot() + facet_grid(item~.,scale="free",rows=1)
ggplot(data, aes(x=integrator, y=value)) + geom_boxplot() + facet_wrap(item~.,scale="free",nrow=1)
ggplot(data, aes(x=integrator, y=value)) + geom_boxplot() + facet_wrap(~item,scale="free",nrow=1)
data.lv <- gather(sum.lv.tabl, item, value, num_leaps:time.per.ess.tail, factor_key=TRUE)
data.sir <- gather(sum.sir.tabl, item, value, num_leaps:time.per.ess.tail, factor_key=TRUE)
data.vdp <- gather(sum.vdp.tabl, item, value, num_leaps:time.per.ess.tail, factor_key=TRUE)
ggplot(data.sir, aes(x=integrator, y=value)) + geom_boxplot() + facet_wrap(~item,scale="free",nrow=1)
sum.lv.tabl
colnames(sum.sir.tabl)[length(colnames(sum.sir.tabl))] <- "integrator"
colnames(sum.vdp.tabl)[length(colnames(sum.vdp.tabl))] <- "integrator"
data.lv <- gather(sum.lv.tabl, item, value, num_leaps:time.per.ess.tail, factor_key=TRUE)
data.sir <- gather(sum.sir.tabl, item, value, num_leaps:time.per.ess.tail, factor_key=TRUE)
data.vdp <- gather(sum.vdp.tabl, item, value, num_leaps:time.per.ess.tail, factor_key=TRUE)
ggplot(data.sir, aes(x=integrator, y=value)) + geom_boxplot() + facet_wrap(~item,scale="free",nrow=1)
p.sir <- ggplot(data.sir, aes(x=integrator, y=value)) + geom_boxplot() + facet_wrap(~item,scale="free",nrow=1)
p.vdp <- ggplot(data.vdp, aes(x=integrator, y=value)) + geom_boxplot() + facet_wrap(~item,scale="free",nrow=1)
p.vdp
p.sir
sum.lv.tabl
sum.lv.tabl[c(1:3, 5, 7, 9, 11:20 ) , ]
sum.lv.tabl[c(1:2, 11:20 ) , ]
data.lv.no.stuck <- gather(sum.lv.tabl[c(1:2, 11:20 ) , ], item, value, num_leaps:time.per.ess.tail, factor_key=TRUE)
data.lv.no.stuck
p.lv <- ggplot(data.lv.no.stuck, aes(x=integrator, y=value)) + geom_boxplot() + facet_wrap(~item,scale="free",nrow=1)
p.lv
ggsave(p.sir, "summary_sir_model.png")
ggsave("summary_sir_model.png", p.sir)
ggsave("summary_lv_model.png", p.lv)
ggsave("summary_vdp_model.png", p.vdp)
q()
